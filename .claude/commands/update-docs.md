---
description: 'ドキュメントの更新が必要か調査し、必要に応じて更新する'
---

# ドキュメント更新コマンド

このコマンドは、コードの変更に応じてドキュメントを自動的に更新します。

## 実行手順

1. **ドキュメント検証を実行**
   - `npm run validate:docs:update` を実行してコード変更を確認
   - 変更されたファイルのリストを取得

2. **変更内容を分析**
   - 過去10コミットの変更を確認: `git diff HEAD~10`
   - 各ファイルの具体的な変更内容を確認
   - ドキュメント更新が必要な重要な変更を特定

3. **ドキュメント更新が必要な変更の判断基準**

   **更新が必要:**
   - 型定義の追加・変更（`shared/src/types.ts`）
   - API仕様の変更（リクエスト/レスポンスフォーマット）
   - 新機能の追加
   - アーキテクチャの変更
   - 公開インターフェースの変更

   **更新不要:**
   - 内部実装の改善・リファクタリング
   - バグフィックス（挙動が変わらない）
   - テストコードの変更
   - CI/CD設定の微調整
   - コメントやコードフォーマットの変更

4. **更新対象ドキュメントを特定**

   変更内容に応じて以下を更新:
   - `docs/api/` - API仕様
   - `docs/architecture/` - アーキテクチャ
   - `docs/backend/` - バックエンド
   - `docs/deployment/` - デプロイルール
   - `docs/development/` - 日常的な開発ルール
   - `docs/figma-plugin/` - プラグイン
   - `docs/shared/` - 共通処理
   - `CLAUDE.md` - 重要な設計方針（稀）

5. **ドキュメントを更新**
   - 変更内容を反映した適切な説明を追加
   - CODE_REF コメントが正しい行番号を指しているか確認
   - 例やサンプルコードを更新

6. **検証**
   - `npm run validate:docs` を実行して検証
   - 更新したドキュメントの diff を確認

7. **結果をユーザーに報告**
   - 更新したドキュメントのリスト
   - 主な変更内容のサマリー
   - コミットすべきファイルの一覧

## 出力形式

最後に以下の形式でサマリーを提示:

```
## 完了しました！

### 📝 更新したドキュメント

#### 1. [ファイル名] (+X行, -Y行)
- 変更内容1
- 変更内容2

### 🔍 調査結果

[主な変更内容の説明]

### 次のステップ

変更内容を確認して、必要に応じてコミットしてください:
`git status`
```

## 注意事項

- CLAUDE.md は重要な設計方針の変更時のみ更新（通常は `docs/` 配下のみ）
- 軽微な変更や内部実装の変更では更新不要
- 型システムやAPI仕様の変更は必ず反映すること
- CODE_REF コメントは最新のコードを参照していることを確認
